<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Speechless</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;} </style> </head> <body> <article class="project"> <header>  <img class="logo" src="logo.svg" alt="Logo">    <span class="version">1.0.0</span>    <p class="description">A dialogue system language implementation.</p>   </header> <section id="documentation"><article><h1 id="about speechless">About Speechless</h1><p>This is a system implementing an advanced dialogue system that is capable of complex dialogue flow including choice trees and conditional branching. Speechless was first developed for the <a class="external-link" href="https://kandria.com">Kandria</a> game, and has since been separated and made public in the hopes that it may find use elsewhere or inspire other developers to build similar systems.</p><p>Speechless is based on the <a class="external-link" href="https://shirakumo.github.io/markless">Markless</a> document standard for its syntax and makes use of Markless' ability to be extended to add additional constructs useful for dialogue systems.</p><p>Speechless can compile dialogue from its base textual form into an efficient instruction set, which is then executed when the game is run. Execution of the dialogue is completely engine-agnostic, and only requires some <a class="cross-reference" href="#writing a client">simple integration</a> with a client protocol to run.</p><p>Thanks to Markless' extensibility, Speechless can also be further extended to include additional syntax and constructs that may be useful for your particular game.</p><h2 id="user manual">User Manual</h2><p>This section covers the syntax and behaviour of Speechless dialogue. With any luck, after reading this you'll be able to write your own dialogue in Speechless. </p><h3 id="speech">Speech</h3><p>Let's jump in with the classic:</p><code style="display:block" class="code-block" data-language="markless"><pre>| Hello world!</pre></code><p>This piece should just show the text <code>Hello world!</code>. However, there's a bit of a problem: we don't know who's saying this! In order to annotate which character is speaking, we can add a source line:</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Hello world!</pre></code><p>Now we know that this is a character called <code>Hans</code> speaking the line. What the character's name should actually be depends on how your game engine organises things. For now we're assuming that we can just use the character's own name.</p><p>Often you'll also want to inform the system about how the character is feeling to accentuate the text and give it some more gravitas.</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| (:excited)Hello world!</pre></code><p>Depending on your game this emote might correspond to the character changing their expression on screen as the text scrolls. For further flavour we can also use Markless' markup to change the text style.</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| (:excited)//Hello// **world**!</pre></code><p>In Markless itself this would mean italic and bold, respectively, though the actual interpretation of it is up to the current game engine, and might have different effects like text shaking, wobbling, and so forth. Important to know here is only that there are several ways to markup text out of the box:</p><ul><li><p><code>**bold**</code></p></li><li><p><code>//italic//</code></p></li><li><p><code>__underline__</code></p></li><li><p><code>&lt;-strikethrough-&gt;</code></p></li><li><p>And more, see the <a class="external-link" href="https://shirakumo.github.io/markless">Markless documentation</a>.</p></li></ul><p>Markup can also be nested, <code>//like **so**!//</code>.</p><p>Finally, you can accentuate text by inserting pauses with en (<code>--</code>) and em (<code>---</code>) dashes. This can be quite useful to control the pacing of the text scroll to be more natural.</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Helloooo-- world!</pre></code><p>After a line of text, Speechless will insert a prompt for the player to continue so that there's no risk of the text scrolling by too fast for the player to read it.</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Hey
| (:concerned)Are you still with me?
| (:frantic)Hang in there, Chris!</pre></code><p>That should cover things for speech. Let's move on to more advanced stuff.</p><h3 id="player choice">Player Choice</h3><p>Speechless allows you to make branching dialogue by presenting the player with a set of options. These options can even be gated behind checks. A basic choice is presented through a simple unordered list.</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Are you getting this?
- Yes
- No</pre></code><p>This will show the options <code>Yes</code> and <code>No</code> to the user, though no matter what they end up picking, neither of them actually do anything. Let's change that.</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Are you getting this?
- Yes
  | Nice, well done!
- No
  | Sorry to hear that. What are you having trouble with?</pre></code><p>The consequences of a choice follow after the choice's text, within the same list item. You can insert as many things as you want into the same list item as long as the item actually continues (no empty lines).</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Are you getting this?
- Yes
  ~ Hannah
  | See, I told you, they'd get it no problem!
- No
  ~ Hannah
  | Ah what, really? Come on!</pre></code><p>You can insert as many choices as you want, though obviously for game design reasons it's probably not wise to present too many at once.</p><p>Choices can also be nested to create dialogue trees.</p><a id="tree"></a><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Are you getting this?
- Yes
  | Alright, are you ready for the next lesson?
  - Let's go
    | Wow, you're really blazing through this!
  - No, not quite yet
    | Ok, let's continue another time then
- No
  | What's bothering you?
  - I just need more time
    | Ok, no problem, let's try again another time then
  - I'm hopelessly confused
    | Give yourself some time then, come back to it later!
  - I hate this
    | Sorry to hear that. You don't have to continue if you don't want to!</pre></code><p>As you might imagine, this can quickly get hard to see through, though. One way to make it a bit easier to read is to destructure the choices with labels and jumps.</p><h3 id="labels and jumps">Labels and Jumps</h3><p>In order to control flow and to help you section your dialogue, Speechless includes constructs to give points within the dialogue a name and to jump to such a name from another point in the dialogue. Creating a label is simple enough:</p><code style="display:block" class="code-block" data-language="markless"><pre>&gt; start
| How are ya?</pre></code><p>This associates the label <code>start</code> with the speech <code>How are ya?</code>, meaning once you jump to <code>start</code> it will start showing the text. Jumping to a label is also simple enough. For fun, let's recreate the classic <a class="external-link" href="https://betanews.com/2014/05/01/10-print-hello-50-years-of-basic-20-goto-10/">BASIC loop</a>.</p><code style="display:block" class="code-block" data-language="markless"><pre>&gt; 10
| HELLO WORLD!
&lt; 10</pre></code><p>This will infinitely repeat, creating a truly never ending experience. All jokes aside, jumps and labels can come in handy when writing branching dialogue, since it allows us to create &quot;empty choices&quot; and to flatten the tree.</p><code style="display:block" class="code-block" data-language="markless"><pre>&gt; start
| Are you sure you want to give me a million dollars?
- Yes!
  | Wow, thanks so much, you're so generous!
- No
  | I implore you to reconsider.
  &lt; start</pre></code><p>This will cause the dialogue to keep looping back to the question if the player chooses the <code>No</code> option, effectively creating an empty choice as found in some games.</p><p>Similarly we can flatten choice trees by sectioning consequences out to labels. Transforming the <a class="cross-reference" href="#tree">above choice</a> we get this:</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Are you getting this?
- Yes
  &lt; Yes
- No
  &lt; No

&gt; Yes
| Alright, are you ready for the next lesson?
- Let's go
  | Wow, you're really blazing through this!
- No, not quite yet
  | Ok, let's continue another time then

&gt; No
| What's bothering you?
- I just need more time
  | Ok, no problem, let's try again another time then
- I'm hopelessly confused
  | Give yourself some time then, come back to it later!
- I hate this
  | Sorry to hear that. You don't have to continue if you don't want to!</pre></code><p>There's one small problem with this though, namely that once the <code>Yes</code> tree completes, it will continue execution and also do the <code>No</code> tree. This is pretty much never what we want, so instead we should be using sections to do this, which is another way of labelling:</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Are you getting this?
- Yes
  &lt; Yes
- No
  &lt; No

# Yes
| Alright, are you ready for the next lesson?
- Let's go
  | Wow, you're really blazing through this!
- No, not quite yet
  | Ok, let's continue another time then

# No
| What's bothering you?
- I just need more time
  | Ok, no problem, let's try again another time then
- I'm hopelessly confused
  | Give yourself some time then, come back to it later!
- I hate this
  | Sorry to hear that. You don't have to continue if you don't want to!</pre></code><p>Sections force an end of dialogue, so that if execution should hit upon a section header without it just jumping there, it'll automatically end. If we now want to go back to the main execution flow after either choice completes however, we can use a normal label again:</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Hans
| Are you getting this?
- Yes
  &lt; Yes
- No
  &lt; No
&gt; Main
| Bye!

# Yes
| Alright, are you ready for the next lesson?
- Let's go
  | Wow, you're really blazing through this!
- No, not quite yet
  | Ok, let's continue another time then
&lt; Main

# No
| What's bothering you?
- I just need more time
  | Ok, no problem, let's try again another time then
- I'm hopelessly confused
  | Give yourself some time then, come back to it later!
- I hate this
  | Sorry to hear that. You don't have to continue if you don't want to!
&lt; Main</pre></code><p>Note that all labels – regardless of the syntax used to define them – are global to a piece of dialogue though, so you can't use the same name twice.</p><p>Lets move on to another advanced topic, conditions and branching.</p><h3 id="conditions">Conditions</h3><p>Sometimes dialogue needs to react to game state. Choices might need to be hidden, or a character might need to react in a different way depending on what the player has done so far. Speechless offers a couple of ways to do this. The most basic way is the conditional block.</p><code style="display:block" class="code-block" data-language="markless"><pre>? have-water
| ~ Fireman
| | Quick, use the water to put out the fire!</pre></code><p>In this dialogue, the Fireman will shout <code>Quick, use the water to put out the fire!</code> if <code>have-water</code> is true.</p><p><code>have-water</code> here is a placeholder for some kind of Lisp expression. This expression can be arbitrary Lisp code, and it is up to the game engine to control how that code is evaluated. Often the engine will add a variety of support functions and variables to help manage and check various parts of the game's state. We won't go into Lisp syntax and semantics here, you'll want to consult another tutorial for that as it is a very complex topic.</p><p>The above conditional block can also include additional branches, and simply executes the first branch for which the test passes:</p><code style="display:block" class="code-block" data-language="markless"><pre>? have-water
| ~ Fireman
| | Quick, use the water to put out the fire!
|? have-hose
| ~ Fireman
| | Blast it!
|?
| ~ Fireman
| | Someone get us some water, stat!</pre></code><p>A branch with no condition always passes. The conditional block is thus similar to <code>if/else if/else</code> chains, or <code><a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOND" class="xref">cond</a></code> in Lisp.</p><p>Often however the full conditional block is too lengthy and bulky. For quick conditional dialogue pieces, the inline branch can also be used:</p><code style="display:block" class="code-block" data-language="markless"><pre>~ Fireman
| [have-water Quick, use the water! | Get some water stat!]</pre></code><p>Both forms of branching can be used to restrict choices behind a check as well.</p><code style="display:block" class="code-block" data-language="markless"><pre>- [have-water Here, let me help!|]
  ~ Fireman
  | Then don't just stand there!
- I'll go get some water!
  ~ Fireman
  | And make it quick!</pre></code><p>In this case if the <code>have-water</code> check fails, the option would not be available to the player.</p><p>One thing to watch out for when using conditional blocks to restrict choices is that since the block and speech both use the same syntax, you have to make sure to interrupt the conditional block before you can continue with speech. You can do this with another block like a source, or by using a clear (not empty!) line:</p><code style="display:block" class="code-block" data-language="markless"><pre><a href="http://l1sp.org/cl/-" class="xref">-</a> ? have-water
  | Here, let me help!
  
  | Then don't just stand there!</pre></code><p>Note the two spaces on the seemingly empty line to continue the list item.</p><p>Both forms of conditionals can be nested arbitrarily, too, though you cannot nest a conditional block inside an inline conditional.</p><h3 id="evaluation">Evaluation</h3><p>Finally, often it's desired to cause changes to game state, or include dialogue particular to game state. Since integrating with game state is typically extremely specific to the game and engine being made at the time, Speechless just includes basic constructs to splice a Lisp value into text, and to evaluate arbitrary Lisp code.</p><p>While not ideal from a user perspective as it forces you to learn some Lisp, typically engine coders can provide enough shorthand functions for the dialogue system such that dialogue authors don't have to learn a lot of Lisp to get going.</p><p>The placeholder <code>{form}</code> evaluates the form and writes whatever the form returns as its value to text. This can be handy when you need to involve dynamic stuff like nicknames in a classic RPG:</p><code style="display:block" class="code-block" data-language="markless"><pre>| Hi, my name is {(name character)}!</pre></code><p>Dialogue also often needs to trigger changes in game state, be that in response to completing a dialogue or in response to a choice the user made. For this the <code><a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3AEVAL" class="xref">eval</a></code> instruction can be used.</p><code style="display:block" class="code-block" data-language="markless"><pre>! eval (spawn 'dog)</pre></code><p>Again, which functions and variables are available depends on the game and engine being built. Please consult your internal documentation on that.</p><h3 id="misc">Misc</h3><p>Markless includes a few additional constructs that can be helpful with Speechless, too. For instance, comments can be used to write notes for yourself about what a piece of dialogue is meant to do or in which context it occurs.</p><code style="display:block" class="code-block" data-language="markless"><pre>; This is a note to myself and won't have any effect!</pre></code><p>You can also emit warnings or even errors if there's a problem in the dialogue and you would like to make sure the game can't proceed yet.</p><code style="display:block" class="code-block" data-language="markless"><pre>! error This isn't ready yet!</pre></code><p>Again, consult the <a class="external-link" href="http://shirakumo.github.io/markless/">Markless documentation</a> for a complete outline of the Markless syntax and semantics.</p><p>This should cover everything that's supported by Speechless out of the box. Your engine may add extra constructs and support syntax. To see how to do that, please <a class="cross-reference" href="#extension">read on</a>.</p><h2 id="writing a client">Writing a Client</h2><p>The dialogue system in Speechless is game engine agnostic. This means that you get full control over the user input and display of the dialogue.</p><p>Before we can get started on implementing the client, you should know that Speechless is a compiled language. Thus you need to compile the dialogue to an <code><a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">assembly</a></code> before it can be executed. To do so, you can simply call <code><a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE%2A" class="xref">compile*</a></code>. If you would like to customise the lexical environment for forms used in the dialogue however, you should also create a subclass of <code><a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">assembly</a></code>, implement a method on <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWRAP-LEXENV" class="xref">wrap-lexenv</a></code>, and then pass an instance of that assembly to <code><a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE%2A" class="xref">compile*</a></code>. All Lisp forms within the dialogue are also compiled down to functions, so no run-time <code><a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3AEVAL" class="xref">eval</a></code> or compilation occurs when dialogue is actually executed.</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="http://l1sp.org/cl/defclass" class="xref">defclass</a> assembly (<a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">dialogue:assembly</a>) ())

(<a href="http://l1sp.org/cl/defmethod" class="xref">defmethod</a> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWRAP-LEXENV" class="xref">dialogue:wrap-lexenv</a> (form (_ assembly))
  `(let ((example T))
     ,form))

(<a href="http://l1sp.org/cl/defvar" class="xref">defvar</a> *dialogue* (<a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE%2A" class="xref">dialogue:compile*</a> &quot;| Hey there!&quot; 'assembly))</pre></code><p>Once armed with a compiled <code><a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">assembly</a></code>, you'll want to execute it. To do so you need a <code><a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AVM" class="xref">vm</a></code> instance, and prepare it with <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN" class="xref">run</a></code>.</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="http://l1sp.org/cl/defvar" class="xref">defvar</a> *vm* (<a href="http://l1sp.org/cl/make-instance" class="xref">make-instance</a> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AVM" class="xref">'dialogue:vm</a>))
(<a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN" class="xref">dialogue:run</a> *dialogue* *vm*)</pre></code><p>From there on executing dialogue is a matter of repeatedly calling <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARESUME" class="xref">resume</a></code> on the VM and performing whatever <code><a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AREQUEST" class="xref">request</a></code> it returns. To do so you'll want to implement a loop similar to this:</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="http://l1sp.org/cl/loop" class="xref">loop</a> with ip = 0
      for request = (<a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARESUME" class="xref">dialogue:resume</a> *vm* ip)
      until (<a href="http://l1sp.org/cl/typep" class="xref">typep</a> request 'dialogue:end-request)
      do (setf ip (handle request)))</pre></code><p>Though typically you won't be able to use a synchronous loop like this, since the game will need to render and perform other functions like scrolling the text or waiting for user input before resuming the VM.</p><p>In any case, the interactions with the VM are simple – all you need to keep track of is the next instruction pointer to resume with once you're ready to continue execution. Each <code><a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AREQUEST" class="xref">request</a></code> that the VM returns to you will have one – or in the case of a user choice several – target instruction pointers to resume with.</p><p>If you still need help implementing it, you can check the <a class="external-link" href="https://gitea.tymoon.eu/shinmera/kandria/src/branch/master/ui/textbox.lisp#L95">Kandria sources</a> for a fully featured reference implementation.</p><p>If you have trouble with dialogue execution and it doesn't behave as you expect, you can try debugging it by passing the assembly to <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADISASSEMBLE" class="xref">disassemble</a></code>. This behaves similar to <code><a href="http://l1sp.org/cl/disassemble" class="xref">cl:disassemble</a></code> and will print out the assembled instructions in their execution sequence.</p><h2 id="extension">Extension</h2><p>If desired you can add your own syntax constructs to Speechless. To do so you will need to implement a corresponding syntax tree <code>component</code>, a <code>directive</code> to parse it, an <code><a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">instruction</a></code> to execute it, and possibly a <code><a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AREQUEST" class="xref">request</a></code> to expose whatever client functionality you need.</p><p>Before adding new syntax, you should familiarise yourself with the Markless standard terminology, and the <a class="external-link" href="https://shirakumo.github.io/cl-markless">cl-markless implementation</a>. As an example here though we'll assume you want to implement a new &quot;singular line directive&quot; – something that has a prefix at the beginning of the line and consumes the whole line, like <code>~ </code>.</p><p>We're going to add some syntax to let you spawn some objects in the game. The syntax should look like this:</p><code style="display:block" class="code-block" data-language="markless"><pre><a href="http://l1sp.org/cl/%2B" class="xref">+</a> enemy :at 'camp</pre></code><p>First we need to define a <code>component</code> class corresponding to our new syntax.</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="http://l1sp.org/cl/defclass" class="xref">defclass</a> spawn (<a href="https://Shinmera.github.io/staple/#CLASS%20CL-MARKLESS-COMPONENTS%3ABLOCK-COMPONENT" class="xref">org.shirakumo.markless.components:block-component</a>)
  ((arguments :initarg :argmunts :accessor arguments)))</pre></code><p>Next we need to define a directive that will parse the syntax to the new component type.</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="http://l1sp.org/cl/defclass" class="xref">defclass</a> spawn-directive (<a href="https://Shinmera.github.io/staple/#CLASS%20CL-MARKLESS%3ASINGULAR-LINE-DIRECTIVE" class="xref">org.shirakumo.markless:singular-line-directive</a>) ())

(<a href="http://l1sp.org/cl/defmethod" class="xref">defmethod</a> <a href="https://Shinmera.github.io/staple/#GENERIC-FUNCTION%20CL-MARKLESS%3APREFIX" class="xref">org.shirakumo.markless:prefix</a> ((_ spawn-directive))
  #(&quot;+&quot; &quot; &quot;))

(<a href="http://l1sp.org/cl/defmethod" class="xref">defmethod</a> <a href="https://Shinmera.github.io/staple/#GENERIC-FUNCTION%20CL-MARKLESS%3ABEGIN" class="xref">org.shirakumo.markless:begin</a> ((_ spawn-directive) parser line cursor)
  (let ((arguments (<a href="http://l1sp.org/cl/loop" class="xref">loop</a> while (<a href="http://l1sp.org/cl/%3C" class="xref">&lt;</a> cursor (<a href="http://l1sp.org/cl/length" class="xref">length</a> line))
                         collect (<a href="http://l1sp.org/cl/multiple-value-bind" class="xref">multiple-value-bind</a> (value next) (<a href="http://l1sp.org/cl/read-from-string" class="xref">read-from-string</a> line NIL NIL :start cursor)
                                   (setf cursor next)
                                   value)))
        (component (<a href="http://l1sp.org/cl/make-instance" class="xref">make-instance</a> 'spawn :arguments arguments)))
    (<a href="https://Shinmera.github.io/staple/#FUNCTION%20CL-MARKLESS%3ACOMMIT" class="xref">org.shirakumo.markless:commit</a> _ component parser))
  (<a href="http://l1sp.org/cl/length" class="xref">length</a> line))</pre></code><p>Next we need to add our directive onto the list of used directives for the dialogue.</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="http://l1sp.org/cl/pushnew" class="xref">pushnew</a> 'spawn-directive <a href="#VARIABLE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3A%2ADEFAULT-DIRECTIVES%2A" class="xref">org.shirakumo.fraf.speechless.syntax:*default-directives*</a>)</pre></code><p>Now that that's done we can already parse our new syntax!</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APARSE" class="xref">dialogue:parse</a> &quot;+ test&quot;)</pre></code><p>To compile this we could re-use an existing instruction like <code><a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3AEVAL" class="xref">eval</a></code>, but just to be complete we'll define separate instruction types and requests.</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="http://l1sp.org/cl/defclass" class="xref">defclass</a> spawn-instruction (<a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">dialogue:instruction</a>)
  ((type :initarg :type :accessor type)
   (argfun :initarg :argfun :accessor argfun)))

(<a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADEFINE-SIMPLE-WALKER" class="xref">dialogue:define-simple-walker</a> spawn spawn-instruction
  :type (<a href="http://l1sp.org/cl/first" class="xref">first</a> (arguments spawn))
  :argfun (<a href="http://l1sp.org/cl/compile" class="xref">compile</a> NIL `(lambda () ,(dialogue:wrap-lexenv `(list ,@(rest (arguments spawn))) <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">dialogue:assembly</a>))))</pre></code><p>Also see <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWALK" class="xref">walk</a></code> and <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMIT" class="xref">emit</a></code> in case you ever have more complex needs for compilation. The reason we compile the rest of the arguments here is that we probably want them to be evaluated, rather than literals.</p><p>Now we can compile our dialogue to an assembly:</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE%2A" class="xref">dialogue:compile*</a> &quot;+ test&quot;)</pre></code><p>Finally we need to define the execution of our instruction. Again, a new request is likely not necessary here, but we'll do it just for completeness of the tutorial.</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="http://l1sp.org/cl/defclass" class="xref">defclass</a> spawn-request (<a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST" class="xref">dialogue:target-request</a>)
  ((type :initarg :type :accessor type)
   (initargs :initarg :initargs :accessor initargs)))

(<a href="http://l1sp.org/cl/defmethod" class="xref">defmethod</a> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEXECUTE" class="xref">dialogue:execute</a> ((instruction spawn-instruction) (vm <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AVM" class="xref">dialogue:vm</a>) ip)
  (<a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASUSPEND" class="xref">dialogue:suspend</a> vm (<a href="http://l1sp.org/cl/make-instance" class="xref">make-instance</a> 'spawn-request :type (type instruction) :initargs (<a href="http://l1sp.org/cl/funcall" class="xref">funcall</a> (argfun instruction)) :target (<a href="http://l1sp.org/cl/1%2B" class="xref">1+</a> ip))))</pre></code><p>When we execute the instruction we call the argument function to evaluate the arguments to a list. We then return that list fully prepared to the client, so that all they need to do now is create the new instance as requested and spawn it into the game.</p><p>We also include a <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET" class="xref">target</a></code> instruction pointer, which usually is just the instruction immediately following.</p><p>And that's it. Now you can fully compile and execute your new dialogue syntax!</p><p>For more advanced instruction compilation, optimisation passes, and other stuff, please see the source code.</p></article></section>   <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.0.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external" href="https://github.com/Shinmera/cl-markless">cl-markless</a></li><li><a class="external" href="https://Shinmera.github.io/documentation-utils/">documentation-utils</a></li></ul> </div>   <div class="row"> <label for="author">Author:</label> <a id="author" href="mailto:shinmera@tymoon.eu">Nicolas Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/shirakumo/speechless/blob/master/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://shirakumo.github.io/speechless">https://shirakumo.github.io/speechless</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/shirakumo/speechless.git">https://github.com/shirakumo/speechless.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.FRAF.SPEECHLESS"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS">ORG.SHIRAKUMO.FRAF.SPEECHLESS</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:ASSEMBLY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY">ASSEMBLY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/compiler.lisp#L30">Source</a>  </header> <div class="docstring"><pre>A class representing a set of instructions ready to be executed.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTIONS" class="xref">INSTRUCTIONS</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ANEXT-INDEX" class="xref">NEXT-INDEX</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMIT" class="xref">EMIT</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWALK" class="xref">WALK</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADISASSEMBLE" class="xref">DISASSEMBLE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN-PASS" class="xref">RUN-PASS</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN" class="xref">RUN</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:BEGIN-MARK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ABEGIN-MARK">BEGIN-MARK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L126">Source</a>  </header> <div class="docstring"><pre>An instruction to mark the beginning of a piece of text markup.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AMARKUP" class="xref">MARKUP</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:CHOICE-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACHOICE-REQUEST">CHOICE-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L18">Source</a>  </header> <div class="docstring"><pre>A request that represents a set of choices for the user to choose between.

Each choice in the list of choices has a corresponding instruction
pointer in the list of targets that the VM should resume from after
the request.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACHOICES" class="xref">CHOICES</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGETS" class="xref">TARGETS</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINPUT-REQUEST" class="xref">INPUT-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:CHOOSE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACHOOSE">CHOOSE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L113">Source</a>  </header> <div class="docstring"><pre>An instruction representing a request to make the user choose an
    option.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:CLEAR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACLEAR">CLEAR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L136">Source</a>  </header> <div class="docstring"><pre>An instruction to clear the text.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:CLEAR-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACLEAR-REQUEST">CLEAR-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L29">Source</a>  </header> <div class="docstring"><pre>A request to clear the current text on screen.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST" class="xref">TARGET-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:COMMIT-CHOICE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMMIT-CHOICE">COMMIT-CHOICE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L116">Source</a>  </header> <div class="docstring"><pre>An instruction to commit the current text buffer as a choice.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AJUMP" class="xref">JUMP</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:CONDITIONAL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACONDITIONAL">CONDITIONAL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L60">Source</a>  </header> <div class="docstring"><pre>An instruction that represents a chain of branches, similar to COND.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACLAUSES" class="xref">CLAUSES</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:CONFIRM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACONFIRM">CONFIRM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L123">Source</a>  </header> <div class="docstring"><pre>An instruction to prompt the user to confirm.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:CONFIRM-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACONFIRM-REQUEST">CONFIRM-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L26">Source</a>  </header> <div class="docstring"><pre>A request to ask the user to confirm before proceeding with execution.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINPUT-REQUEST" class="xref">INPUT-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST" class="xref">TARGET-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT-REQUEST" class="xref">TEXT-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:EMOTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMOTE">EMOTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L96">Source</a>  </header> <div class="docstring"><pre>An instruction representing a change in expression for the speaker.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMOTE" class="xref">EMOTE (function)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:EMOTE-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMOTE-REQUEST">EMOTE-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L32">Source</a>  </header> <div class="docstring"><pre>A request to change the expression of the current speaker.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT-REQUEST" class="xref">TEXT-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST" class="xref">TARGET-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:END-MARK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEND-MARK">END-MARK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L133">Source</a>  </header> <div class="docstring"><pre>An instruction to mark the end of the most recent markup section.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ABEGIN-MARK" class="xref">BEGIN-MARK</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:END-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEND-REQUEST">END-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L49">Source</a>  </header> <div class="docstring"><pre>A request to end the dialogue.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AREQUEST" class="xref">REQUEST</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:EVAL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEVAL">EVAL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L153">Source</a>  </header> <div class="docstring"><pre>An instruction to execute a Lisp function.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AFUNC" class="xref">FUNC</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:INPUT-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINPUT-REQUEST">INPUT-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L5">Source</a>  </header> <div class="docstring"><pre>Base class for requests that require user input.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AREQUEST" class="xref">REQUEST</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:INSTRUCTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION">INSTRUCTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Base class for a dialogue instruction.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINDEX" class="xref">INDEX</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ALABEL" class="xref">LABEL</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:JUMP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AJUMP">JUMP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L44">Source</a>  </header> <div class="docstring"><pre>An instruction that jumps to another instruction index.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET" class="xref">TARGET</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:JUMP-RESOLUTION-PASS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AJUMP-RESOLUTION-PASS">JUMP-RESOLUTION-PASS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/optimizers.lisp#L26">Source</a>  </header> <div class="docstring"><pre>Pass to resolve jumps to labels to actual instruction indices.

After this pass all jumps should have their target be an instruction
index.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ALABEL-MAP" class="xref">LABEL-MAP</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APASS" class="xref">PASS</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:NOOP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ANOOP">NOOP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L28">Source</a>  </header> <div class="docstring"><pre>A no-operation instruction. Does nothing.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:NOOP-ELIMINATION-PASS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ANOOP-ELIMINATION-PASS">NOOP-ELIMINATION-PASS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/optimizers.lisp#L41">Source</a>  </header> <div class="docstring"><pre>Pass to eliminate all noop instructions

This pass rewrites jump instructions to resolve to proper indices
without the need for noops. After this pass, no noops should remain in
the assembly.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ALABEL-MAP" class="xref">LABEL-MAP</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APASS" class="xref">PASS</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:PASS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APASS">PASS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/optimizers.lisp#L5">Source</a>  </header> <div class="docstring"><pre>Class representing an optimisation pass.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN-PASS" class="xref">RUN-PASS</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AOPTIMIZE-INSTRUCTIONS" class="xref">OPTIMIZE-INSTRUCTIONS</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE%2A" class="xref">COMPILE*</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:PAUSE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APAUSE">PAUSE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L103">Source</a>  </header> <div class="docstring"><pre>An instruction representing a pause in speech.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADURATION" class="xref">DURATION</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:PAUSE-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APAUSE-REQUEST">PAUSE-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L39">Source</a>  </header> <div class="docstring"><pre>A request to pause execution for a period of real time.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT-REQUEST" class="xref">TEXT-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST" class="xref">TARGET-REQUEST</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADURATION" class="xref">DURATION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:PLACEHOLDER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APLACEHOLDER">PLACEHOLDER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L110">Source</a>  </header> <div class="docstring"><pre>An instruction representing a dynamic piece of text.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AFUNC" class="xref">FUNC</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AREQUEST">REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Base class for all client requests.

A request requires the client to perform some operation before
execution can resume.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINPUT-REQUEST" class="xref">INPUT-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST" class="xref">TARGET-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT-REQUEST" class="xref">TEXT-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACHOICE-REQUEST" class="xref">CHOICE-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACONFIRM-REQUEST" class="xref">CONFIRM-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACLEAR-REQUEST" class="xref">CLEAR-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMOTE-REQUEST" class="xref">EMOTE-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APAUSE-REQUEST" class="xref">PAUSE-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASOURCE-REQUEST" class="xref">SOURCE-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEND-REQUEST" class="xref">END-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:SOURCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASOURCE">SOURCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L31">Source</a>  </header> <div class="docstring"><pre>An instruction representing a change in the speaking source.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ANAME" class="xref">NAME</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:SOURCE-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASOURCE-REQUEST">SOURCE-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L46">Source</a>  </header> <div class="docstring"><pre>A request to change the speaker of the dialogue.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST" class="xref">TARGET-REQUEST</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ANAME" class="xref">NAME</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:TARGET-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST">TARGET-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L7">Source</a>  </header> <div class="docstring"><pre>Base class for requests that advance the instruction pointer after completion.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AREQUEST" class="xref">REQUEST</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET" class="xref">TARGET</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:TEXT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT">TEXT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/instructions.lisp#L139">Source</a>  </header> <div class="docstring"><pre>An instruction to output a piece of text.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT" class="xref">TEXT (function)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:TEXT-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT-REQUEST">TEXT-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Base class for requests that carry some text to be output

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT" class="xref">TEXT (function)</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AMARKUP" class="xref">MARKUP</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS:VM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AVM">VM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L52">Source</a>  </header> <div class="docstring"><pre>A class to represent the execution state of a dialogue assembly.

In order to execute dialogue you should first compile it to an
assembly, then construct a VM instance and pass the assembly to the VM
via RUN. This will initialise the VM properly. Afterwards you should
call RESUME, which will return a REQUEST instance, informing you of a
necessary action to take. You should then continue calling RESUME with
the new instruction pointer as instructed by the request until an
END-REQUEST is returned.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AREQUEST" class="xref">REQUEST</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEXECUTE" class="xref">EXECUTE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASUSPEND" class="xref">SUSPEND</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTIONS" class="xref">INSTRUCTIONS</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN" class="xref">RUN</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:COMPILE*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE%2A">COMPILE*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">THING</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ASSEMBLY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/optimizers.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Shorthand to compile and optimise.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE" class="xref">COMPILE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AOPTIMIZE-INSTRUCTIONS" class="xref">OPTIMIZE-INSTRUCTIONS</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:OPTIMIZE-INSTRUCTIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AOPTIMIZE-INSTRUCTIONS">OPTIMIZE-INSTRUCTIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ASSEMBLY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/optimizers.lisp#L18">Source</a>  </header> <div class="docstring"><pre>Run the assembly through known optimisation passes.

Returns the modified assembly.

See <a href="#VARIABLE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%2AOPTIMIZATION-PASSES%2A" class="xref">*OPTIMIZATION-PASSES*</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN-PASS" class="xref">RUN-PASS</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:PARSE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APARSE">PARSE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">THING</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/compiler.lisp#L5">Source</a>  </header> <div class="docstring"><pre>Parses input to a markless component tree.

See <a href="https://Shinmera.github.io/staple/#GENERIC-FUNCTION%20CL-MARKLESS%3APARSE" class="xref">ORG.SHIRAKUMO.MARKLESS:PARSE</a>
See ORG.SHIRAKUMO.FRAF.KANDRIA.DIALOGUE.SYNTAX:PARSER</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:RESOLVED-TARGET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARESOLVED-TARGET">RESOLVED-TARGET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">COMPONENT</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/compiler.lisp#L76">Source</a>  </header> <div class="docstring"><pre>Resolves the component's target to an actual component in the document tree.

Signals an error if the target cannot be resolved to a target
component.

See <a href="https://Shinmera.github.io/staple/#GENERIC-FUNCTION%20CL-MARKLESS-COMPONENTS%3ATARGET" class="xref">ORG.SHIRAKUMO.MARKLESS.COMPONENTS:TARGET</a>
See <a href="https://Shinmera.github.io/staple/#GENERIC-FUNCTION%20CL-MARKLESS-COMPONENTS%3ALABEL" class="xref">ORG.SHIRAKUMO.MARKLESS.COMPONENTS:LABEL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:CHOICES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACHOICES">CHOICES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the list of choices to present to the user.

Each choice is a string of text to display.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACHOICE-REQUEST" class="xref">CHOICE-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF CHOICES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20CHOICES%29">(SETF CHOICES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:CLAUSES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACLAUSES">CLAUSES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the list of clauses of the conditional instruction.

Each entry in the clause list is a cons composed out of a test
function and a jump target.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACONDITIONAL" class="xref">CONDITIONAL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF CLAUSES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20CLAUSES%29">(SETF CLAUSES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:COMPILE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE">COMPILE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">THING</li>    <li class="argument">ASSEMBLY</li>  </ul>  </header> <div class="docstring"><pre>Compiles the given input to an assembly.

Unless the input is a component, it is first passed to PARSE before
being compiled.

Note that this function only performs direct compilation to
instructions. Typically this is not sufficient for execution, as jumps
may need to be resolved in an extra optimisation pass.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APARSE" class="xref">PARSE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE%2A" class="xref">COMPILE*</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWALK" class="xref">WALK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:DISASSEMBLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADISASSEMBLE">DISASSEMBLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INSTRUCTION</li>  </ul>  </header> <div class="docstring"><pre>Prints the assembly in a more readable fashion to help with debugging.

Unless the input is an assembly or an instruction, it is first passed
to COMPILE* before being disassembled.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACOMPILE%2A" class="xref">COMPILE*</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:DURATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADURATION">DURATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the duration of the pause (in seconds).

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APAUSE" class="xref">PAUSE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF DURATION)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20DURATION%29">(SETF DURATION)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:EMIT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMIT">EMIT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INSTRUCTION</li>    <li class="argument">ASSEMBLY</li>  </ul>  </header> <div class="docstring"><pre>Emits an instruction into the assembly.

This will assign the instruction index and add it to the vector of
instructions in the assembly.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:EMOTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMOTE">EMOTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the designator of the expression that should be displayed.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMOTE" class="xref">EMOTE (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF EMOTE)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20EMOTE%29">(SETF EMOTE)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:EXECUTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEXECUTE">EXECUTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INSTRUCTION</li>    <li class="argument">VM</li>    <li class="argument">IP</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/vm.lisp#L58">Source</a>  </header> <div class="docstring"><pre>Executes an instruction in the VM.

You should add methods to this function if you include new instruction
types. Should return the new instruction pointer, typically (1+ ip).
If an instruction requires execution from the client, it should call
SUSPEND with the appropriate request instance.

It is an error to call EXECUTE from outside of the context of a RESUME
call.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AVM" class="xref">VM</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:INDEX"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINDEX">INDEX</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the index at which this instruction occurs in the sequence.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF INDEX)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20INDEX%29">(SETF INDEX)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:INSTRUCTIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTIONS">INSTRUCTIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the vector of instructions of the assembly.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF INSTRUCTIONS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20INSTRUCTIONS%29">(SETF INSTRUCTIONS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:LABEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ALABEL">LABEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the label the instruction is associated with, if any.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF LABEL)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20LABEL%29">(SETF LABEL)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:MARKUP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AMARKUP">MARKUP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the identifier for the markup.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT-REQUEST" class="xref">TEXT-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ABEGIN-MARK" class="xref">BEGIN-MARK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF MARKUP)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20MARKUP%29">(SETF MARKUP)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:NAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ANAME">NAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the name designator the instruction relates to.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASOURCE" class="xref">SOURCE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF NAME)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20NAME%29">(SETF NAME)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:NEXT-INDEX"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ANEXT-INDEX">NEXT-INDEX</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ASSEMBLY</li>  </ul>  </header> <div class="docstring"><pre>Returns the next instruction index to use.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:POP-TEXT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APOP-TEXT">POP-TEXT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VM</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:RESET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARESET">RESET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VM</li>  </ul>  </header> <div class="docstring"><pre>Resets the VM to its initial state.

Returns the VM.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AVM" class="xref">VM</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:RESUME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARESUME">RESUME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VM</li>    <li class="argument">IP</li>  </ul>  </header> <div class="docstring"><pre>Resumes execution of the VM.

This will process instructions until a request to the client has to be
made. To do this the VM will continuously call EXECUTE and update the
instruction pointer. An instruction that requires a request should
call SUSPEND to suspend the execution and return from RESUME.

If the assembly runs to completion (the instruction pointer exceeds
the instruction vector), an END-REQUEST is returned.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AVM" class="xref">VM</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASUSPEND" class="xref">SUSPEND</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEXECUTE" class="xref">EXECUTE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:RUN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN">RUN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ASSEMBLY</li>    <li class="argument">VM</li>  </ul>  </header> <div class="docstring"><pre>Prepare the VM to run an assembly.

This will initialise the VM with the assembly's instructions and reset
its state.

Returns the VM.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARESET" class="xref">RESET</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AVM" class="xref">VM</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:RUN-PASS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARUN-PASS">RUN-PASS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">PASS</li>    <li class="argument">THING</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:SUSPEND"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASUSPEND">SUSPEND</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VM</li>    <li class="argument">RETURN</li>  </ul>  </header> <div class="docstring"><pre>Suspends execution of the VM to make a request to the client.

This function must only be called from EXECUTE.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ARESUME" class="xref">RESUME</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEXECUTE" class="xref">EXECUTE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:TARGET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET">TARGET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the target of the instruction.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AJUMP" class="xref">JUMP</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET-REQUEST" class="xref">TARGET-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF TARGET)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20TARGET%29">(SETF TARGET)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:TARGETS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGETS">TARGETS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the list of target instruction pointers.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACHOICE-REQUEST" class="xref">CHOICE-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF TARGETS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20TARGETS%29">(SETF TARGETS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:TEXT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT">TEXT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the text to be output

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT-REQUEST" class="xref">TEXT-REQUEST</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT" class="xref">TEXT (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:(SETF TEXT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3A%28SETF%20TEXT%29">(SETF TEXT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:TEXT-BUFFER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATEXT-BUFFER">TEXT-BUFFER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:WALK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWALK">WALK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">AST</li>    <li class="argument">ASSEMBLY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/compiler.lisp#L46">Source</a>  </header> <div class="docstring"><pre>Walks the AST to emit instructions into the assembly.

This function should have methods for every supported component type
to handle it and compile it into a set of instructions.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMIT" class="xref">EMIT</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AINSTRUCTION" class="xref">INSTRUCTION</a>
See <a href="https://Shinmera.github.io/staple/#CLASS%20CL-MARKLESS-COMPONENTS%3ACOMPONENT" class="xref">ORG.SHIRAKUMO.MARKLESS.COMPONENTS:COMPONENT</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:WRAP-LEXENV"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWRAP-LEXENV">WRAP-LEXENV</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ASSEMBLY</li>    <li class="argument">FORM</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/compiler.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Function used to wrap the lexical environment of forms compiled in dialogue.

You should implement a method on this if you want to customise the
lexical environment of dialogue forms. The function acts like a
macro; it receives an expression as input, and should return a new
expression to be used in its place.

Typically you'll want to do stuff like surround the form with LETs and
FLETs to make special convenience functions and variables available.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AASSEMBLY" class="xref">ASSEMBLY</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:DEFINE-MARKUP-WALKER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADEFINE-MARKUP-WALKER">DEFINE-MARKUP-WALKER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">COMPONENT</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">MARKUP</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/compiler.lisp#L64">Source</a>  </header> <div class="docstring"><pre>Shorthand macro to define a walker method for markup components.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWALK" class="xref">WALK</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS:DEFINE-SIMPLE-WALKER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ADEFINE-SIMPLE-WALKER">DEFINE-SIMPLE-WALKER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">COMPONENT</li>    <li class="argument">INSTRUCTION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">INITARGS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/compiler.lisp#L57">Source</a>  </header> <div class="docstring"><pre>Shorthand macro to define a walker method that emits a single instruction.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AWALK" class="xref">WALK</a></pre></div> </article> </li> </ul> </article> </li>  <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX">ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition special-variable" id="VARIABLE ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:*DEFAULT-DIRECTIVES*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3A%2ADEFAULT-DIRECTIVES%2A">*DEFAULT-DIRECTIVES*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Variable holding the list of directives used in a default parser.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3APARSER" class="xref">PARSER</a></pre></div> </article> </li>  <li> <article class="definition special-variable" id="VARIABLE ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:*DEFAULT-INSTRUCTION-TYPES*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3A%2ADEFAULT-INSTRUCTION-TYPES%2A">*DEFAULT-INSTRUCTION-TYPES*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Variable holding the list of instruction types used in a default parser.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3APARSER" class="xref">PARSER</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:CONDITIONAL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3ACONDITIONAL">CONDITIONAL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L48">Source</a>  </header> <div class="docstring"><pre>Directive for a conditional block.

Syntax: &quot;? form&quot;

Following lines should be either &quot;| &quot; for a conditional body or
&quot;|? form&quot; for a branch condition, or &quot;|?&quot; for an otherwise
branch.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:CONDITIONAL-PART"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3ACONDITIONAL-PART">CONDITIONAL-PART</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L156">Source</a>  </header> <div class="docstring"><pre>Directive for an inline conditional.

Syntax: &quot;[form if-clause | else-clause ]&quot;</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:EMOTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3AEMOTE">EMOTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L119">Source</a>  </header> <div class="docstring"><pre>Directive for the expression of the speaking character.

Syntax: &quot;(:emote)&quot;</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:JUMP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3AJUMP">JUMP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L19">Source</a>  </header> <div class="docstring"><pre>Directive representing a jump to another label.

Syntax: &quot;&lt; label&quot;</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:LABEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3ALABEL">LABEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L30">Source</a>  </header> <div class="docstring"><pre>Directive representing a label.

Syntax: &quot;&gt; label&quot;</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:PARSER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3APARSER">PARSER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L14">Source</a>  </header> <div class="docstring"><pre>Parser class customised to use the correct set of directives and instructions.

See <a href="#VARIABLE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3A%2ADEFAULT-DIRECTIVES%2A" class="xref">*DEFAULT-DIRECTIVES*</a>
See <a href="#VARIABLE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3A%2ADEFAULT-INSTRUCTION-TYPES%2A" class="xref">*DEFAULT-INSTRUCTION-TYPES*</a>
See <a href="https://Shinmera.github.io/staple/#CLASS%20CL-MARKLESS%3APARSER" class="xref">ORG.SHIRAKUMO.MARKLESS:PARSER</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:PART-SEPARATOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3APART-SEPARATOR">PART-SEPARATOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L139">Source</a>  </header> <div class="docstring"><pre>Directive for the separator of a part in a compound directive.

Syntax: &quot;|&quot;</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:PLACEHOLDER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3APLACEHOLDER">PLACEHOLDER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L103">Source</a>  </header> <div class="docstring"><pre>Directive for a dynamic piece of text.

Syntax: &quot;{form}&quot;</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX:SOURCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3ASOURCE">SOURCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/syntax.lisp#L77">Source</a>  </header> <div class="docstring"><pre>Directive for a speaking source.

Syntax: &quot;~ source&quot;</pre></div> </article> </li> </ul> </article> </li>  <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS">ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:CAMERA"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ACAMERA">CAMERA</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L51">Source</a>  </header> <div class="docstring"><pre>Instruction to cause a camera action.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AACTION" class="xref">ACTION</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AARGUMENTS" class="xref">ARGUMENTS</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:CONDITIONAL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ACONDITIONAL">CONDITIONAL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L6">Source</a>  </header> <div class="docstring"><pre>A component representing a conditional execution path.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACLAUSES" class="xref">CLAUSES</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:CONDITIONAL-PART"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ACONDITIONAL-PART">CONDITIONAL-PART</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L27">Source</a>  </header> <div class="docstring"><pre>A component representing an inline conditional.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AFORM" class="xref">FORM</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACHOICES" class="xref">CHOICES</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:EMOTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AEMOTE">EMOTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L24">Source</a>  </header> <div class="docstring"><pre>A component representing an expression of the speaking character.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMOTE" class="xref">EMOTE (function)</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:EVAL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AEVAL">EVAL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L63">Source</a>  </header> <div class="docstring"><pre>Instruction to evaluate a piece of Lisp code.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AFORM" class="xref">FORM</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:GO"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AGO">GO</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L45">Source</a>  </header> <div class="docstring"><pre>Instruction to jump to a specific component.

See <a href="https://Shinmera.github.io/staple/#GENERIC-FUNCTION%20CL-MARKLESS-COMPONENTS%3ATARGET" class="xref">ORG.SHIRAKUMO.MARKLESS.COMPONENTS:TARGET</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:JUMP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AJUMP">JUMP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L3">Source</a>  </header> <div class="docstring"><pre>A component representing a jump to another component.

See <a href="https://Shinmera.github.io/staple/#GENERIC-FUNCTION%20CL-MARKLESS-COMPONENTS%3ATARGET" class="xref">ORG.SHIRAKUMO.MARKLESS.COMPONENTS:TARGET</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:MOVE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AMOVE">MOVE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L55">Source</a>  </header> <div class="docstring"><pre>Instruction to move a character to another position.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AENTITY" class="xref">ENTITY</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ATARGET" class="xref">TARGET</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:PLACEHOLDER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3APLACEHOLDER">PLACEHOLDER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L21">Source</a>  </header> <div class="docstring"><pre>A component representing a dynamic piece of text.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AFORM" class="xref">FORM</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:SETF"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ASETF">SETF</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L59">Source</a>  </header> <div class="docstring"><pre>Instruction to set a place.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3APLACE" class="xref">PLACE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AFORM" class="xref">FORM</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:SOURCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ASOURCE">SOURCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L18">Source</a>  </header> <div class="docstring"><pre>A component representing someone speaking.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ANAME" class="xref">NAME</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:SPEED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ASPEED">SPEED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/speechless/blob/master/components.lisp#L48">Source</a>  </header> <div class="docstring"><pre>Instruction to change the letter scroll speed.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ASPEED" class="xref">SPEED (function)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:ARGUMENTS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AARGUMENTS">ARGUMENTS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the list of arguments for the camera action.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ACAMERA" class="xref">CAMERA</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:(SETF ARGUMENTS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3A%28SETF%20ARGUMENTS%29">(SETF ARGUMENTS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:CHOICES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ACHOICES">CHOICES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses a vector of choices for the conditional.

Each entry in the vector is a vector of child components.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3ACONDITIONAL-PART" class="xref">CONDITIONAL-PART</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:(SETF CHOICES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3A%28SETF%20CHOICES%29">(SETF CHOICES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:CLAUSES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ACLAUSES">CLAUSES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses a vector of clauses for the conditional component.

Each entry in the vector is a cons of a predicate and child
components.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ACONDITIONAL" class="xref">CONDITIONAL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:(SETF CLAUSES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3A%28SETF%20CLAUSES%29">(SETF CLAUSES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:EMOTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AEMOTE">EMOTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the name describing the expression of the character.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3AEMOTE" class="xref">EMOTE (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:(SETF EMOTE)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3A%28SETF%20EMOTE%29">(SETF EMOTE)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:FORM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3AFORM">FORM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses a Lisp form to be evaluated for the component.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3APLACEHOLDER" class="xref">PLACEHOLDER</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3ACONDITIONAL-PART" class="xref">CONDITIONAL-PART</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASETF" class="xref">SETF</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.SYNTAX%3AEVAL" class="xref">EVAL</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:(SETF FORM)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3A%28SETF%20FORM%29">(SETF FORM)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:NAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ANAME">NAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the name of the speaker.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS%3ASOURCE" class="xref">SOURCE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:(SETF NAME)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3A%28SETF%20NAME%29">(SETF NAME)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:PLACE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3APLACE">PLACE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses a form describing the place to set.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:(SETF PLACE)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3A%28SETF%20PLACE%29">(SETF PLACE)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:SPEED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ASPEED">SPEED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><pre>Accesses the speed at which the text should scroll, relative to base speed.

See <a href="#CLASS%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3ASPEED" class="xref">SPEED (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS:(SETF SPEED)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.FRAF.SPEECHLESS.COMPONENTS%3A%28SETF%20SPEED%29">(SETF SPEED)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 